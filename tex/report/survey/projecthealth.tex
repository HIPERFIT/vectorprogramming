\chapter{Evaluation: Project Health}

When we ask ``How good is the health of project X?'' What we want to
determine is how likely is it that development on the language will
continue and that it will keep getting funding and interest from
developers and researchers.

There are several metrics to consider, some are qualitative others
quantitative. The qualitative metrics we will consider is:

\begin{itemize}
\item What is the quality and status of the documentation? Good
  documentation gives better acessibility for new users and
  developers.
\item What is the quality of the code base? Users will more likely
  become contributors if the code is easy to start hacking on.
\item How portable is each of the languages? More portable progams
  have a wider potential user audience.
\item How hard is it to install? A cumbersome installation process is
  deterring for newcomers.
\end{itemize}

Quantitative questions include:
\begin{itemize}
\item Number of dependencies (incl. GHC extensions). ``Bad health is transitive''.
\item Number of users (reverse dependencies). The bigger the audience, the more people with some interest in the project continuing.
\item Number of contributors.
\item How easy is it to start contributing?
\item Latest project activity (e.g. which version of GHC does it compile on?)
\item Licensing
\item Funding
\end{itemize}

\todo{Document the procedures and scripts that were used to collect reverse dependencies and to carry out installs}


\section{Accelerate}
\subsection{Source Quality}

\paragraph{Documentation.} The documentation for Accelerate resides mainly in
two different places: The haddock API-docs on hackage, and more high-level
documentation on the project's github wiki.  Other documentation reside in
somewhat scattered web pages, most notably in the paper
\cite{chakravarty2011accelerating}.  As of this writing, the main introductory
material seems to be the github project wiki and the paper
\cite{chakravarty2011accelerating}. Of these two, the wiki pages are more
oriented towards building applications using Accelerate, while the paper
focuses on detailing the current implementation and only briefly introduces the
Accelerate language in an academic fashion.

Unfortunately, many of the wiki pages are rather incomplete, so we must
conclude that there has yet to be published any comprehensive introductory
material on programming using Accelerate.
The API reference documentation however is extensive.

\paragraph{Code.} The Accelerate codebase is large for a Haskell library, and
a bit overwhelming at first. They have a good division between frontend (the
accelerate package) and backends (e.g. the accelerate-cuda package), which
limits the amount of code you have to get into. You don't really have to
understand the complete frontend to modify in the backend and vice versa. A
good overview document of the different modules, and their tasks would be a
great benefit for getting other hackers involved.\todo{Text above is copied
verbatim from wiki.}

\paragraph{Installation process} We succeeded in getting Accelerate to run on
GHC 7.4.2, but it still doesn't support GHC 7.6.1, possibly because of external
dependencies.  We had some trouble installing the version on hackage, because
of a minor bug in the cuda-bindings. The bug was caused by code generated by
c2hs, so it might be something that depends on the version of CUDA installed.

We had major trouble installing the development-version from their repository,
mainly caused by a lot of dependency issues and conflicts. We still have to
compile the CUDA-backend.  \todo{Text above is copied verbatim from wiki.}

\subsection{Relations with other projects}

\paragraph{Dependencies.}
For the Accelerate frontend we have counted 8 package dependencies and 19 GHC
extensions, while the CUDA backend sports 23 package dependencies and 5 GHC
extensions.
Most of the package dependencies are commonly occuring packages, but some are
less so. \todo{The last paragraph sounds unsubstantiated}

The Accelerate frontend is tied only to the GHC-compiler (through its generous
use of GHC haskell extensions), and thus runs on any platform (architecture or
OS) that GHC supports.
The CUDA backend is only available on machines with a NVidia CUDA graphics
card, and supports all versions of CUDA (but recommend using at hardware with
at least compute capability 1.2).

\paragraph{Reverse Dependencies.} For Accelerate we have
counted a total of two package users on hackage, excluding the different
accelerate backends, as we consider them to be part of the same project.

\paragraph{Contributors.} During the last 12 months, the Accelerate
frontend has seen a total of 6 different contributors. Across the entire
project history, 14 people have contributed.
Accelerate is hosted as a git repository on github.com, so getting a copy of
the latest source code and submitting patches is structurally
straightforward.
Given that the project has seen a variety of small volume contributers, with no
apparent close connection to the Accelerate maintainers, they appear to have an
inclusive attitude towards other people's code.

\paragraph{Licensing.} Accelerate is licensed under BSD-like terms, requiring
mainly that attribution is retained in derivative works.

\subsection{Maintainance}

Accelerate has been actively maintained for the
past 12 months.
The two main contributors, Trevor L. McDonell and Manuel M
T Chakravarty, are both employed by University of New South Wales, Sydney,
Australia, and assumably maintain Accelerate as part of their research there.

\section{Repa}

\subsection{Source Quality}

\paragraph{Documentation.} Repa is extensively documented through both API
documentation on hackage, various papers, tutorials and example programs, eg in
\cite{lippmeier2012guiding} and \cite{keller2010regular}.  Everything is easily
accessible directly from the front page of the repa homepage
\cite{homepage:repa}.

\paragraph{Code.}
\todo{\ldots}

\paragraph{Installation process.} Since Repa is just a regular Haskell package
that doesn't interface with foreign functions, its installation is
straightforward using the \texttt{cabal-install} program.

\subsection{Relations with other projects}

\paragraph{Dependencies.} %
Repa uses 18 GHC extensions and depends on 6 other established packages, none
specific to any platform. Thus, Repa will most probably function on any
machine that is targetable by GHC.

\paragraph{Reverse Dependencies.} Repa is a comparatively popular package. On
hackage there are 9 other packages that each depend on Repa.

\paragraph{Contributors.} Looking at the commit log for the official Repa
source code repository, we may count 4 distinct names. The primary contributor
(in number of patches) appears to be Ben Lippmeier by a great margin.

\todo{It seems redundant to keep saying that the code is publically available
in a VCS. They all are. And we have no reference to cite that contributions are
welcome, so any comment on contribution friendliness would be guesswork. Should
we perhaps report that? Is the question of ease of contribution even
interesting? Isn't it a universally accepted work dynamic of free/oss software
that contribution is encouraged}

\paragraph{Licensing.} Repa is licensed under the terms of the BSD3 license.

\subsection{Maintainance}
Ben Lippmeier is employed as a researcher by "School of Computer Science and
Engineering", and Repa is listed among his projects there.

\section{Nikola}

\subsection{Source Quality}

\paragraph{Documentation.} As Nikola is not published on Hackage, there is no
automatically searchable generated documentation, and one has to manually
generate haddock documentation. Counting source lines reveals a figure of 24\%
comment lines, which is above the average comment ratio according to the
ohloh.net open source project visualisation website\footnote{14-11-2012:
``Across all Haskell projects on Ohloh, 17\% of all source code lines are
comments. For nikola-haskell, this figure is 24\%.''}. This figure turned out
to be quite useless in this case, as we discovered most comments were just
disabled code rather than documentation. Further, Nikola is described in the
paper \cite{mainland2010nikola}.

\paragraph{Code.} (TODO)

\paragraph{Portability.} Only runs(/builds even?) on machines with an NVidia
CUDA card and with the CUDA drivers and sdk installed.

\paragraph{Installation process} Nikola requires running a classical style
automake "configure"-script to produce the binding to the cuda-backend.

We had a sizable amount of trouble executing the installation. \todo{why
exactly? (Difficult to link with CUDA sdk, cabal dependency hell)}

\subsection{Relations with other projects}

\paragraph{Dependencies.} For Nikola we have counted a total of 20 package
dependencies, all of which are either maintained by Mainland himself or appear
to have a healthy user base (reverse dependencies on Hackage).

One of the dependencies is the \texttt{cuda} package, meaning that the nikola
package is only installable on machines with the NVidia CUDA sdk and hardware.

We have counted the use of 26 different GHC language extensions, most of which
are regularly occuring. \todo{We need a more purposeful/relevant treatment of
ghc extensions and their consequences to project health}

\paragraph{Reverse Dependencies.} Since Nikola is not published on hackage, our
method of counting users doesn't apply. Nikola is published on the github.com
website however, where the project has 9 stars and zero forks\footnote{Gathered
on 2012-11-15}, which is at least some measurable artifact of the existance of
human interest in the language effort.

\paragraph{Contributors.} According to the version control system's commit
logs, only Geoffrey Mainland has contributed to the development of Nikola

The source code is hosted on github, so structurally/bureaucratically easy.
Geoffrey appears to be interested/open in merging in contributions from other
people. \todo{This comment still seems redundant ..}

Since Nikola is still a work in progress that has yet to settle on a final form
and direction, new contributions might only be accepted if they align with the
author's own possibly unarticulated notion of what he wants with the project.
\todo{This needs reassesment..}

\paragraph{Licensing.}
Harvard College, appears BSD style. \todo{validate or elaborate.}

\subsection{Maintainance}
\todo{ Appears to have been funded as part of phd research (or what?), but appears
to be a spare-time project now.}

\section{Vector}

\subsection{Source Quality}

\paragraph{Documentation.} The Vector package has extensive api-documentation
available. Furthermore there is a tutorial on
\cite{homepage:haskell:vectortutorial}.

\paragraph{Code.}

\paragraph{Portability.} Vector is tied to GHC through its package dependency
on the ghc-prim package. Otherwise it appears to be Haskell98 \todo{verify
this.}

\paragraph{Installation process.} Vector is just a regular Cabal package with
no particular dependencies, so it installs without any complications

\subsection{Relations with other projects}

\paragraph{Dependencies.} Vector only has 4 package dependencies, and all of
these are regularly occuring packages.

\paragraph{Reverse Dependencies.} Even without counting recursively, it is
evident that Vector has well past 150 users on hackage.

\paragraph{Contributors.}
At least Roman Leshchinskiy. \todo{Depends on darcs.}

\paragraph{Licensing.} The Vector package is licensed with the BSD3 license.

\subsection{Maintainance} Vector has seen regular maintainance as of October 2012.

\begin{table}
  \centering
  \begin{tabular}{l|rrllllr}
    Language    & Project age & Latest release & License & Contributors \\ \hline
    Accelerate  & 3-4 years   & June 2012      & BSD3    & 3 \\
    Nikola      & 1-2 years   & Not released   & BSD3    & 1 \\
    Repa        & 1-2 years   & October 2012   & BSD3    & 4 \\
    Data.Vector & 4 years     & October 2012   & BSD3    & 9 \\
  \end{tabular}
  \caption{Project status}
  \label{tab:project_status}
\end{table}

\begin{table}
  \centering
  \begin{tabular}{l|rrllllr}
    Language    & Dependencies & Reverse dependencies & GHC extensions & GHC version \\ \hline
    Accelerate  & 5 (+18)      & 2                    & 19 (+9)        & 7.6.1 \\
    Nikola      & 21 0         & 0                    & 26             & 7.4.2 \\
    Repa        & 6            & 11                   & 20             & 7.6.1 \\
    Data.Vector & 4            & 150+                 & 15             & 7.6.1 \\
  \end{tabular}
  \caption{Dependency status}
  \label{tab:dependency_status}
\end{table}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../master"
%%% End:
